# generated by fastapi-codegen:
#   filename:  openapi.yml
#   timestamp: 2023-05-05T14:33:26+00:00

from __future__ import annotations

from typing import List

from database import get_db
from fastapi import Depends, FastAPI
from handler import *

from models import Affiliate, AffiliatesPostRequest, User, UsersPostRequest

app = FastAPI(
    title='API Title',
    version='1.0',
    servers=[{'url': 'https://api.server.test/v1'}],
)


@app.get('/affiliates', response_model=List[Affiliate], tags=['Affiliate'])
async def get_affiliates(db=Depends(get_db)) -> List[Affiliate]:
    return do_get_affiliates(db=db)


@app.post('/affiliates', response_model=str, tags=['Affiliate'])
async def post_affiliates(body: AffiliatesPostRequest, db=Depends(get_db)) -> str:
    return do_post_affiliates(body=body, db=db)


@app.get('/users', response_model=List[User], tags=['User'])
async def get_users(db=Depends(get_db)) -> List[User]:
    return do_get_users(db=db)


@app.post('/users', response_model=str, tags=['User'])
async def post_users(body: UsersPostRequest, db=Depends(get_db)) -> str:
    return do_post_users(body=body, db=db)
